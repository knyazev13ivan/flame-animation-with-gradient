!function(){"use strict";var n,e={782:function(n,e,t){var r=t(294),i=t(745),o=t(427),a=(0,o.oM)({name:"points",initialState:{points:[{id:":r0:",color:"rgb(240, 209, 1)",position:0},{id:":r1:",color:"rgb(255, 144, 15)",position:130},{id:":r2:",color:"rgb(240, 53, 50)",position:240},{id:":r3:",color:"rgb(24, 24, 24)",position:460}]},reducers:{changePosition:function(n,e){var t=e.payload,r=n.points.findIndex((function(n){return n.id===t.id})),i=t.position;t.position<0&&(i=0),t.position>480&&(i=480),n.points[r].position=i},changeColor:function(n,e){var t=e.payload,r=n.points.findIndex((function(n){return n.id===t.id}));n.points[r].color=t.color},addPoint:function(n,e){var t=e.payload;n.points.push({id:t.id,color:t.color,position:t.position})},deletePoint:function(n,e){n.points.filter((function(n){return n.id!==e.payload}))}}}),s=a.actions,c=s.changePosition,l=s.changeColor,u=(s.addPoint,s.deletePoint,a.reducer),d=(0,o.oM)({name:"gradient",initialState:{isRun:!1},reducers:{run:function(n){n.isRun=!0},stop:function(n){n.isRun=!1}}}),f=d.actions,h=f.run,p=f.stop,v=d.reducer,m={colors:new Array(64).fill("#ff1154"),size:64},x=(0,o.oM)({name:"colors",initialState:m,reducers:{setColor:function(n,e){n.colors[e.payload.index]=e.payload.color},setColorsArr:function(n,e){n.colors=e.payload.slice()}}}),g=x.actions,j=(g.setColor,g.setColorsArr),w=x.reducer,A=(0,o.xC)({reducer:{points:u,gradient:v,colors:w}}),y=t(998),b=t(152),M=t(925),R=t(893),L=["animation"],C=function(n){var e,t=n.animation,i=(0,M.Z)(n,L),o=(0,r.useRef)(null),a=(0,r.useRef)(null),s=0;(0,r.useEffect)((function(){var n=o.current;return a.current=n.getContext("2d"),e=a.current,function(){return window.cancelAnimationFrame(s)}}),[!0===t.isRun]),(0,r.useEffect)((function(){t.isRun?s=requestAnimationFrame((function(n){return u(n)})):window.cancelAnimationFrame(s)}),[t.isRun]);var c=0,l=0,u=function n(r){var i={currentTime:r,prevTime:c,deltaTime:l=r-c};l<40&&(t.update(i),t.render(e)),c=r,s=requestAnimationFrame((function(e){return n(e)}))};return(0,R.jsx)("canvas",{ref:o,width:i.width,height:i.height})},Z=function(){return(0,y.I0)()},N=y.v9,_=function(n,e){var t=new Array(n[0][0].length).fill(63).map((function(n){return Math.random()>.5?1:63}));n[e][0]=t,n[e][1]=t;for(var r=2;r<n[e].length;r++)for(var i=0;i<n[e][0].length;i++){var o=(n[e][r-2][i]+(n[e][r-1][i-1]||63)+n[e][r-1][i]+(n[e][r-1][i+1]||63))/4.02*1.02;o>63&&(o=63),n[1-e][r][i]=Math.round(o)}};var H=function(n){n.clearRect(0,0,window.innerWidth,window.innerHeight)},S=function(){var n=(0,r.useRef)(null),e=(0,r.useState)(600),t=(0,b.Z)(e,2),i=t[0],o=t[1],a=(0,r.useState)(504),s=(0,b.Z)(a,2),c=s[0],l=s[1],u=(0,r.useRef)();u.current=N((function(n){return n.colors.colors})),(0,r.useLayoutEffect)((function(){o(n.current.offsetWidth),l(n.current.offsetHeight)}),[]);var d=[new Array(Math.floor(c/6)).fill(null).map((function(n){return new Array(Math.floor(i/6)).fill(63)})),new Array(Math.floor(c/6)).fill(null).map((function(n){return new Array(Math.floor(i/6)).fill(63)}))],f=0,h={isRun:!0,update:function(){_(d,f),f=1-f},render:function(n){H(n);for(var e=2;e<d[f].length;e++)for(var t=0;t<d[f][0].length;t++){var r=6*t,i=c-6*e,o=d[f][e][t];n.fillStyle=u.current[o],n.fillRect(r,i,6,6)}}};return(0,R.jsx)("div",{ref:n,className:"flame-container",children:(0,R.jsx)(C,{className:"flame",animation:h,run:!0,width:i,height:c})})},O=["id","offsetLeft"],k=function(n){var e=n.id,t=n.offsetLeft,r=((0,M.Z)(n,O),Z()),i=N((function(n){return n.points.points.find((function(n){return n.id===e}))})),o=i.position,a=i.color;return(0,R.jsxs)("div",{className:"point",style:{left:"".concat(o-10,"px")},children:[(0,R.jsx)("label",{style:{borderColor:a},children:(0,R.jsx)("input",{className:"pick-color",type:"color",value:a,onChange:function(n){r(l({id:e,color:n.target.value}))}})}),(0,R.jsx)("div",{className:"circle",draggable:!0,onDrag:function(n){n.clientX&&r(c({id:e,position:n.clientX-10-t}))},onDragEnd:function(n){r(c({id:e,position:n.clientX-10-t}))}})]})},P=(0,r.memo)(k),E=function(){var n=(0,r.useRef)(null),e=(0,r.useState)(480),t=(0,b.Z)(e,2),i=t[0],o=t[1],a=(0,r.useState)(15),s=(0,b.Z)(a,2),c=s[0],l=s[1],u=Z(),d=N((function(n){return n.points.points})),f=N((function(n){return n.gradient.isRun})),v=N((function(n){return n.colors.size})),m=[];(0,r.useLayoutEffect)((function(){var e,t;o(null===(e=n.current)||void 0===e?void 0:e.offsetWidth),l(null===(t=n.current)||void 0===t?void 0:t.offsetHeight)}),[]),(0,r.useEffect)((function(){u(h())}),[d]);var x={isRun:f,update:function(){},render:function(n){for(var e=d.slice().sort((function(n,e){return n.position-e.position})),t=-1;t<e.length;t++){var r=e[t]||{color:e[t+1].color,position:0},o=e[t+1]||{color:e[t].color,position:i},a=n.createLinearGradient(r.position,0,o.position,0);a.addColorStop(0,r.color),a.addColorStop(1,o.color),n.fillStyle=a,n.fillRect(r.position,0,o.position,15)}m=[];for(var s=0;s<v;s++){var c=Math.floor(s*(i/v)+i/v/2),l=n.getImageData(c,5,1,1).data.slice(0,3);m.push("rgb(".concat(l.join(", "),")"))}u(j(m)),setTimeout((function(){return u(p())}),0)}};return(0,R.jsxs)("div",{ref:n,className:"gradient-bar",children:[(0,R.jsx)(C,{animation:x,run:f,width:i,height:c}),(0,R.jsx)("div",{children:d.map((function(e){var t,i=(0,r.useId)();return(0,R.jsx)(P,{id:i,offsetLeft:null===(t=n.current)||void 0===t?void 0:t.offsetLeft},i)}))})]})},F=function(){return(0,R.jsxs)("div",{className:"contacts",children:[(0,R.jsx)("a",{href:"https://t.me/hauntar",children:(0,R.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("title",{}),(0,R.jsx)("g",{"data-name":"telegram social media network chat",id:"telegram_social_media_network_chat",children:(0,R.jsx)("path",{d:"M28.59,4.29a2.23,2.23,0,0,0-2.27-.36L3.41,13.1a1.83,1.83,0,0,0,0,3.38l1.48.61a1,1,0,0,0,1.31-.53,1,1,0,0,0-.54-1.31L4.56,14.8l22.51-9a.22.22,0,0,1,.23,0,.24.24,0,0,1,.08.23L23.27,25.21a.4.4,0,0,1-.26.3.39.39,0,0,1-.39-.06l-8-6.24,7.83-7.91a1,1,0,0,0-1.22-1.56L9.75,16.54a1,1,0,1,0,1,1.72l4.83-2.85L13.23,17.8a2,2,0,0,0,.2,3.08l8,6.15a2.4,2.4,0,0,0,1.47.5,2.47,2.47,0,0,0,.83-.15,2.37,2.37,0,0,0,1.52-1.75L29.33,6.47A2.23,2.23,0,0,0,28.59,4.29Z"})})]})}),(0,R.jsx)("a",{href:"https://github.com/knyazev13ivan",children:(0,R.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("title",{}),(0,R.jsx)("g",{"data-name":"github coding dev developer",id:"github_coding_dev_developer",children:(0,R.jsx)("path",{d:"M16,3a13,13,0,0,0-3.46,25.53,1,1,0,1,0,.53-1.92,11,11,0,1,1,7-.4,15.85,15.85,0,0,0-.3-3.92A6.27,6.27,0,0,0,24.68,16a6.42,6.42,0,0,0-1.05-3.87,7.09,7.09,0,0,0-.4-3.36,1,1,0,0,0-1.1-.67,8,8,0,0,0-3.37,1.28A11.35,11.35,0,0,0,16,9a13.09,13.09,0,0,0-3,.43A5.74,5.74,0,0,0,9.62,8.25a1,1,0,0,0-1,.66,7.06,7.06,0,0,0-.37,3.19A7.15,7.15,0,0,0,7.2,16a6.66,6.66,0,0,0,5,6.28,7.43,7.43,0,0,0-.15.79c-1,.06-1.58-.55-2.32-1.48a3.45,3.45,0,0,0-1.94-1.53,1,1,0,0,0-1.15.76A1,1,0,0,0,7.35,22c.16,0,.55.52.77.81a4.74,4.74,0,0,0,3.75,2.25,4.83,4.83,0,0,0,1.3-.18h0a1,1,0,0,0,.29-.14l0,0a.72.72,0,0,0,.18-.21.34.34,0,0,0,.08-.09.85.85,0,0,0,.06-.17,1.52,1.52,0,0,0,.06-.2v0a4.11,4.11,0,0,1,.46-1.91,1,1,0,0,0-.76-1.65A4.6,4.6,0,0,1,9.2,16a4.84,4.84,0,0,1,.87-3,1,1,0,0,0,.24-.83,5,5,0,0,1,0-1.85,3.59,3.59,0,0,1,1.74.92,1,1,0,0,0,1,.23A12.49,12.49,0,0,1,16,11a9.91,9.91,0,0,1,2.65.43,1,1,0,0,0,1-.18,5,5,0,0,1,2-1,4.11,4.11,0,0,1,0,1.91,1.05,1.05,0,0,0,.32,1A4,4,0,0,1,22.68,16a4.29,4.29,0,0,1-4.41,4.46,1,1,0,0,0-.94.65,1,1,0,0,0,.28,1.11c.59.51.5,4,.47,5.36a1,1,0,0,0,.38.81,1,1,0,0,0,.62.21,1.07,1.07,0,0,0,.25,0A13,13,0,0,0,16,3Z"})})]})}),(0,R.jsx)("a",{href:"#",children:(0,R.jsxs)("svg",{"data-name":"Layer 1",id:"Layer_1",viewBox:"0 -1 34 34",xmlns:"http://www.w3.org/2000/svg",children:[(0,R.jsx)("title",{}),(0,R.jsx)("path",{d:"M26.66,9.63a.25.25,0,0,1,0-.07,4.28,4.28,0,0,0-.79-1.15L20.59,3.17A4,4,0,0,0,17.76,2H8A3,3,0,0,0,5,5V27a3,3,0,0,0,3,3H24a3,3,0,0,0,3-3V11.24A4,4,0,0,0,26.66,9.63ZM20,5.41,23.59,9H21a1,1,0,0,1-1-1ZM25,27a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V5A1,1,0,0,1,8,4h9.76L18,4V8a3,3,0,0,0,3,3h4a1.94,1.94,0,0,1,0,.24Z"}),(0,R.jsx)("path",{d:"M22,13H19a1,1,0,0,0,0,2h3a1,1,0,0,0,0-2Z"}),(0,R.jsx)("path",{d:"M22,18H10a1,1,0,0,0,0,2H22a1,1,0,0,0,0-2Z"}),(0,R.jsx)("path",{d:"M22,22H10a1,1,0,0,0,0,2H22a1,1,0,0,0,0-2Z"}),(0,R.jsx)("path",{d:"M10,16a1,1,0,0,0,1-1,2.11,2.11,0,0,1,.86-.64,2,2,0,0,0,.84-.41,1.63,1.63,0,0,0,.31,0,1.73,1.73,0,0,0,.32,0,2,2,0,0,0,.85.41,2.24,2.24,0,0,1,.83.62A1,1,0,0,0,17,15c0-1.24-1.3-2.05-1.93-2.34a4.24,4.24,0,0,0,.43-2.16A2.6,2.6,0,0,0,13,8a2.6,2.6,0,0,0-2.5,2.5,4.24,4.24,0,0,0,.43,2.16C10.3,13,9,13.76,9,15A1,1,0,0,0,10,16Zm3-6a.64.64,0,0,1,.5.5c0,.75,0,1.1-.46,1.54H13c-.44-.44-.46-.79-.46-1.54A.64.64,0,0,1,13,10Z"})]})})]})},I=function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("header",{children:(0,R.jsx)("h1",{children:"Flame 🔥"})}),(0,R.jsxs)("main",{children:[(0,R.jsxs)("section",{className:"gradient-description",children:[(0,R.jsx)("div",{className:"color-change",children:(0,R.jsxs)("p",{children:["Изменить цвет можно нажав: ",(0,R.jsx)("span",{className:"example-color"})]})}),(0,R.jsx)("div",{className:"position-change",children:(0,R.jsxs)("p",{children:["Для перемещения цвета:  ",(0,R.jsx)("span",{className:"example-position"})]})})]}),(0,R.jsxs)("section",{className:"animatioin",children:[(0,R.jsx)(E,{}),(0,R.jsx)(S,{})]}),(0,R.jsxs)("section",{className:"flame-description",children:[(0,R.jsxs)("p",{children:["Здесь реализован алгоритм рисования простейшего пламени с изпользованием ",(0,R.jsx)("strong",{children:"React"}),", ",(0,R.jsx)("strong",{children:"TS"}),", ",(0,R.jsx)("strong",{children:"Canvas API"})," и ",(0,R.jsx)("strong",{children:"requestAnimationFrame"}),"."]}),(0,R.jsx)("p",{children:"Алгоритм построен на принципе вычисления среднего цвета точек. Придуман он довольно давно и использовался в огромном количестве демо и игр."}),(0,R.jsx)("p",{children:"Пламя генерируется случайно на основе заранее просчитанной цветовой палитры."}),(0,R.jsxs)("p",{children:["Источник вдохновления: ",(0,R.jsx)("a",{href:"https://habr.com/ru/post/656541/",children:"habr"})]})]})]}),(0,R.jsxs)("footer",{children:[(0,R.jsx)(F,{}),(0,R.jsxs)("span",{className:"source",children:["source by ",(0,R.jsx)("br",{}),(0,R.jsx)("a",{href:"https://github.com/knyazev13ivan/flame-animation-with-gradient",children:"Github"})]})]})]})},z=document.getElementById("root");i.createRoot(z).render((0,R.jsx)(y.zt,{store:A,children:(0,R.jsx)(I,{})}))}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.m=e,n=[],r.O=function(e,t,i,o){if(!t){var a=1/0;for(u=0;u<n.length;u++){t=n[u][0],i=n[u][1],o=n[u][2];for(var s=!0,c=0;c<t.length;c++)(!1&o||a>=o)&&Object.keys(r.O).every((function(n){return r.O[n](t[c])}))?t.splice(c--,1):(s=!1,o<a&&(a=o));if(s){n.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=n.length;u>0&&n[u-1][2]>o;u--)n[u]=n[u-1];n[u]=[t,i,o]},r.d=function(n,e){for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},function(){var n={179:0};r.O.j=function(e){return 0===n[e]};var e=function(e,t){var i,o,a=t[0],s=t[1],c=t[2],l=0;if(a.some((function(e){return 0!==n[e]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(c)var u=c(r)}for(e&&e(t);l<a.length;l++)o=a[l],r.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return r.O(u)},t=self.webpackChunkflame_animation_with_gradients=self.webpackChunkflame_animation_with_gradients||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var i=r.O(void 0,[36],(function(){return r(782)}));i=r.O(i)}();